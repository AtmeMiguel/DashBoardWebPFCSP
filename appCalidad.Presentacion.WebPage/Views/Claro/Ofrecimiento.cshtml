
@{
    string Title = "Preventiva IN";
    ViewBag.Title = Title;
}

<div id="app">
    <div class="containerClaro">
        <br />
        <div class="row">
            <div class="col-sm-12 col-lg-12" v-if="ID == 0">
                <div class="row">
                    <div class="col-xs-3 col-md-3"></div>
                    <div class="col-xs-6 col-md-6">
                        <div class="card redondoCardLight  cajaGrisClaroDelgado">
                            <div class="card-body">
                                <div class="row bg-info">
                                    <div class="col-sm-8 col-md-8 col-lg-8">
                                        <div class="card-title  text-left text-white">
                                            <br /><h3>PREVENTIVA IN</h3>
                                        </div>
                                    </div>
                                    <div class="col-sm-4 col-md-4 col-lg-4">
                                        <div class="card-title  text-right text-white">
                                            <br /><span> <b-avatar button icon="alarm" size="3rem" variant="light"></b-avatar></span><span>&nbsp;&nbsp;&nbsp;Tiempo: </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6 col-md-6 col-lg-6">
                                        <div class="row">
                                            <div class="col-xs-12 col-md-6">
                                                <div class="form-group row">
                                                    <label for="inputEmail3" class="col-sm-4 col-form-label">{{MensajeSistema}}</label>
                                                    <div class="col-sm-7">
                                                        <select v-model="OFRECIMIENTO" class="form-control" v-on:change="cargarDropdow(OFRECIMIENTO),  GESTION = 'SELECCIONAR', VARIABLE = '0' ">
                                                            <option value="SELECCIONAR">SELECCIONAR</option>
                                                            <option v-for="item in Lista21" v-bind:value="{ ID: item.ID, ID_CONTROL: item.ID_CONTROL, VALUE: item.VALUE ,OBSERVACION: item.OBSERVACION, ESTADO: item.ESTADO, SPEECH: item.SPEECH }">
                                                                {{ item.VALUE }}
                                                            </option>
                                                        </select>
                                                    </div>
                                                    <div class="col-sm-1">
                                                        <p v-if="OFRECIMIENTO == 'SELECCIONAR'"><span class="badge badge-danger">!</span></p>
                                                    </div>
                                                </div>
                                                <template v-if="OFRECIMIENTO.SPEECH == 'SI'">
                                                    <div class="form-group row">
                                                        <label for="inputEmail3" class="col-sm-4 col-form-label">GESTIÓN</label>
                                                        <div class="col-sm-7">
                                                            <select v-model="GESTION" class="form-control" v-on:change="VARIABLE = '0'">
                                                                <option value="SELECCIONAR">SELECCIONAR</option>
                                                                <option v-for="item in Lista25" v-bind:value="{ ID: item.ID, ID_CONTROL: item.ID_CONTROL, VALUE: item.VALUE ,OBSERVACION: item.OBSERVACION, ESTADO: item.ESTADO, SPEECH: item.SPEECH, DESCARTES: item.DESCARTES }">
                                                                    {{ item.VALUE }}
                                                                </option>
                                                            </select>
                                                        </div>
                                                        <div class="col-sm-1">
                                                            <p v-if="GESTION == 'SELECCIONAR'"><span class="badge badge-danger">!</span></p>
                                                        </div>
                                                    </div>
                                                    <div v-if="GESTION.SPEECH =='SI'" class="form-group row">
                                                        <label for="inputEmail3" class="col-sm-4 col-form-label">{{GESTION.VALUE}}</label>
                                                        <div class="col-sm-7">
                                                            <input v-model="VARIABLE" maxlength="10" type="tel" class="form-control" oninput="this.value = this.value.replace(/[^0-9.]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" required="" />
                                                        </div>
                                                        <div class="col-sm-1">
                                                            <p v-if="VARIABLE.length < 8"><span class="badge badge-danger">!</span></p>
                                                        </div>
                                                    </div>
                                                </template>
                                            </div>
                                            <div class="col-xs-12 col-md-6 text-center">
                                                <div class="form-group text-center">
                                                    <a class="btn btn-dark rounded-pill text-white text-center" v-on:click="registrarOfrecimiento">GUARDAR</a>
                                                </div>
                                            </div>

                                            <template>
                                                <div class="col-xs-12 col-md-12">


                                                    <template v-if="OFRECIMIENTO.VALUE == 'REPETIDOR MESH' && GESTION.DESCARTES == 'SI'">
                                                        <p class="text-danger" v-if="mensaje.length > 36">

                                                            {{mensaje}}
                                                        </p>
                                                        <hr />
                                                        <div class="row">
                                                            @*description="We'll never share your email with anyone else."*@
                                                            <div class="col-xs-12 col-sm-6">
                                                                <b-form-group label="Kit de cliente:">
                                                                    <b-form-input v-model="KitCliente" type="tel" class="form-control"></b-form-input>
                                                                </b-form-group>
                                                            </div>
                                                            <div class="col-xs-12 col-sm-6">
                                                                <b-form-group label="Costo:">
                                                                    <b-form-input v-model="Costo" type="tel" placeholder="0.00" class="form-control" oninput="this.value = this.value.replace(/[^0-9.]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" maxlength="8" required=""></b-form-input>
                                                                </b-form-group>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-4">
                                                                <b-form-group label="Av/Calle/Jr:">
                                                                    <select v-model="ComboAv" class="form-control">
                                                                        <option value="SELECCIONAR">SELECCIONAR</option>
                                                                        <option v-for="item in Lista30" v-bind:value="{ ID: item.ID, ID_CONTROL: item.ID_CONTROL, VALUE: item.VALUE ,OBSERVACION: item.OBSERVACION, ESTADO: item.ESTADO }">
                                                                            {{ item.VALUE }}
                                                                        </option>
                                                                    </select>
                                                                </b-form-group>
                                                                <b-form-group label="Mz/Bloq/Edif:">
                                                                    <select v-model="ComboMz" class="form-control">
                                                                        <option value="SELECCIONAR">SELECCIONAR</option>
                                                                        <option v-for="item in Lista31" v-bind:value="{ ID: item.ID, ID_CONTROL: item.ID_CONTROL, VALUE: item.VALUE ,OBSERVACION: item.OBSERVACION, ESTADO: item.ESTADO }">
                                                                            {{ item.VALUE }}
                                                                        </option>
                                                                    </select>
                                                                </b-form-group>

                                                            </div>
                                                            <div class="col-xs-12 col-sm-4">
                                                                <b-form-group label="Nombre de la Via:">
                                                                    <b-form-input v-model="NombreVia" type="tel" class="form-control" required=""></b-form-input>
                                                                </b-form-group>
                                                                <b-form-group label="Mz/Bloque/Lote:">
                                                                    <b-form-input v-model="Mz" type="tel" placeholder=" (opcional) " class="form-control" required=""></b-form-input>
                                                                </b-form-group>

                                                            </div>
                                                            <div class="col-xs-12 col-sm-4">
                                                                <b-form-group label="Número:">
                                                                    <b-form-input v-model="Numero" type="tel" placeholder="S/N" class="form-control" oninput="this.value = this.value.replace(/[^0-9.]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" maxlength="8" required=""></b-form-input>
                                                                </b-form-group>
                                                                <b-form-group label="Lote:">
                                                                    <b-form-input v-model="Lte" type="tel" placeholder=" (opcional) " class="form-control" required=""></b-form-input>
                                                                </b-form-group>


                                                            </div>
                                                        </div>

                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-8">
                                                                <b-form-group label="Dirección de entrega:">
                                                                    <b-form-input v-model="DireccionEntrega" type="tel" class="form-control" required=""></b-form-input>
                                                                </b-form-group>
                                                                <b-form-group label="Referencia:">
                                                                    <b-form-input v-model="Referencia" type="tel" class="form-control" required=""></b-form-input>
                                                                </b-form-group>
                                                            </div>
                                                            <div class="col-xs-12 col-sm-4">
                                                                <b-form-group label="Teléfono Ref. 1:">
                                                                    <b-form-input v-model="TelRef1" type="tel" class="form-control" oninput="this.value = this.value.replace(/[^0-9.]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" maxlength="8" required=""></b-form-input>
                                                                </b-form-group>
                                                                <b-form-group label="Teléfono Ref. 2:">
                                                                    <b-form-input v-model="TelRef2" type="tel" class="form-control" oninput="this.value = this.value.replace(/[^0-9.]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" maxlength="8" required=""></b-form-input>
                                                                </b-form-group>
                                                            </div>
                                                        </div>


                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-4">
                                                                <b-form-group label="Departamento:">
                                                                    <select v-model="ComboDepartamento" class="form-control" v-on:change="cargarDropdow(ComboDepartamento)">
                                                                        <option value="SELECCIONAR">SELECCIONAR</option>
                                                                        <option v-for="item in Lista32" v-bind:value="{ ID: item.ID, ID_CONTROL: item.ID_CONTROL, VALUE: item.VALUE ,OBSERVACION: item.OBSERVACION, ESTADO: item.ESTADO }">
                                                                            {{ item.VALUE }}
                                                                        </option>
                                                                    </select>
                                                                </b-form-group>
                                                            </div>
                                                            <div class="col-xs-12 col-sm-4">
                                                                <b-form-group label="Provincia:">
                                                                    <select v-model="ComboProvincia" class="form-control" v-on:change="cargarDropdow(ComboProvincia)">
                                                                        <option value="SELECCIONAR">SELECCIONAR</option>
                                                                        <option v-for="item in Lista33" v-bind:value="{ ID: item.ID, ID_CONTROL: item.ID_CONTROL, VALUE: item.VALUE ,OBSERVACION: item.OBSERVACION, ESTADO: item.ESTADO }">
                                                                            {{ item.VALUE }}
                                                                        </option>
                                                                    </select>
                                                                </b-form-group>
                                                            </div>
                                                            <div class="col-xs-12 col-sm-4">
                                                                <b-form-group label="Distrito:">
                                                                    <select v-model="ComboDistrito" class="form-control">
                                                                        <option value="SELECCIONAR">SELECCIONAR</option>
                                                                        <option v-for="item in Lista34" v-bind:value="{ ID: item.ID, ID_CONTROL: item.ID_CONTROL, VALUE: item.VALUE ,OBSERVACION: item.OBSERVACION, ESTADO: item.ESTADO }">
                                                                            {{ item.VALUE }}
                                                                        </option>
                                                                    </select>
                                                                </b-form-group>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-xs-12 col-sm-4">
                                                                <b-form-group label="Tipo de pago:">
                                                                    <select v-model="ComboTipoPago" class="form-control">
                                                                        <option value="SELECCIONAR">SELECCIONAR</option>
                                                                        <option v-for="item in Lista35" v-bind:value="{ ID: item.ID, ID_CONTROL: item.ID_CONTROL, VALUE: item.VALUE ,OBSERVACION: item.OBSERVACION, ESTADO: item.ESTADO }">
                                                                            {{ item.VALUE }}
                                                                        </option>
                                                                    </select>
                                                                </b-form-group>
                                                            </div>
                                                            <div class="col-xs-12 col-sm-8">
                                                                <b-form-group label="Observaciones:">
                                                                    <b-form-input v-model="ObsMesh" type="tel" class="form-control" required=""></b-form-input>
                                                                </b-form-group>
                                                            </div>
                                                        </div>
                                                    </template>

                                                    <template v-if="OFRECIMIENTO.VALUE=='REFINANCIAMIENTO DE DEUDA'">
                                                        <div class="form-group row">
                                                            <label for="inputEmail3" class="col-sm-4 col-form-label">Campo calculadora</label>
                                                            <div class="col-sm-8">
                                                                <input v-model="CampoCalculadora" type="text" class="form-control" />
                                                            </div>
                                                        </div>
                                                    </template>

                                                    <template v-if="OFRECIMIENTO.VALUE=='ACTIVACIÓN DE SERVICIO DE VALOR AGREGADO'">
                                                        <div class="form-group row">
                                                            <label for="inputEmail3" class="col-sm-4 col-form-label">SVA</label>
                                                            <div class="col-sm-8">
                                                                <input v-model="SVA" type="text" class="form-control" />
                                                            </div>
                                                        </div>
                                                    </template>
                                                    <template v-if="OFRECIMIENTO.VALUE=='CAMBIO DE TIPO DE CLIENTE'">
                                                        <div class="form-group row">
                                                            <label for="inputEmail3" class="col-sm-12 col-form-label">
                                                                PLANTILLA DE GESTIÓN
                                                                *Nuevo Plan a migrar (Claro Empresas o Masivo):
                                                                *Solicita Servicios de Valor Agregado (En caso sea de Masivo a CE, especificar):
                                                                *Total del Nuevo Cargo Fijo (de acuerdo a la nueva oferta comercial + los servicios de valor agregado):
                                                                *Nombres/Razón Social:
                                                                *DNI:
                                                                *Dirección Completa (Tipo vía/Nombre vía/N°/Urbanización/Distrito/Dpto./Provincia):
                                                                *Referencia de la Dirección:
                                                                *Teléfonos de Referencia:
                                                                *Fecha y hora de disponibilidad del Cliente:
                                                                *Cliente Afiliado al Débito Automático (SI/NO):
                                                                *Tipo Tope de Consumo (Aplica/No)
                                                                *Ciclo de Facturación actual:
                                                                *Preselección de LD (Aplica/No):
                                                                *Tipo de envío del recibo:
                                                                *Publicar Número en Guía de Abonado (En caso el servicio tenga telefonía fija):
                                                                Observacion: Escenario con plan especial por retencion"

                                                                *FECHA Y HORA DE LA PROGRAMACIÓN (REFERENCIAL):
                                                            </label>
                                                        </div>
                                                    </template>
                                                    <template v-if="OFRECIMIENTO.VALUE == 'CAMBIO DE PLAN'">
                                                        <div class="form-group row">
                                                            <label for="inputEmail3" class="col-sm-4 col-form-label">Tipo Migración</label>
                                                            <div class="col-sm-8">
                                                                <select v-model="TipoMigracion" class="form-control">
                                                                    <option value="SELECCIONAR">SELECCIONAR</option>
                                                                    <option v-for="item in Lista8" v-bind:value="{ ID: item.ID, ID_CONTROL: item.ID_CONTROL, VALUE: item.VALUE ,OBSERVACION: item.OBSERVACION, ESTADO: item.ESTADO }">
                                                                        {{ item.VALUE }}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label for="inputEmail3" class="col-sm-4 col-form-label">Tipo Play</label>
                                                            <div class="col-sm-8">
                                                                <select v-model="TipoPlay" class="form-control">
                                                                    <option value="SELECCIONAR">SELECCIONAR</option>
                                                                    <option v-for="item in Lista18" v-bind:value="{ ID: item.ID, ID_CONTROL: item.ID_CONTROL, VALUE: item.VALUE ,OBSERVACION: item.OBSERVACION, ESTADO: item.ESTADO }">
                                                                        {{ item.VALUE }}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>

                                                        <div class="form-group row">
                                                            <label for="inputEmail3" class="col-sm-4 col-form-label">Tipo plan</label>
                                                            <div class="col-sm-8">
                                                                <select v-model="TipoPlan" class="form-control">
                                                                    <option value="SELECCIONAR">SELECCIONAR</option>
                                                                    <option v-for="item in Lista9" v-bind:value="{ ID: item.ID, ID_CONTROL: item.ID_CONTROL, VALUE: item.VALUE ,OBSERVACION: item.OBSERVACION, ESTADO: item.ESTADO }">
                                                                        {{ item.VALUE }}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>

                                                        <div class="form-group row">
                                                            <label for="inputEmail3" class="col-sm-4 col-form-label">Plan</label>
                                                            <div class="col-sm-8">
                                                                <input v-model="Plan" type="text" class="form-control" />
                                                            </div>
                                                        </div>

                                                        <div class="form-group row">
                                                            <label for="inputEmail3" class="col-sm-4 col-form-label">Equipos</label>
                                                            <div class="col-sm-8">
                                                                <input v-model="Equipos" type="text" class="form-control" />
                                                            </div>
                                                        </div>

                                                        <div class="form-group row">
                                                            <label for="inputEmail3" class="col-sm-4 col-form-label">Horario sugerido</label>
                                                            <div class="col-sm-8">
                                                                <input v-model="HorarioSugerido" type="date" class="form-control" />
                                                            </div>
                                                        </div>
                                                        <div>
                                                            <b-card no-body>
                                                                <b-tabs card>
                                                                    <b-tab no-body title="PLANES REGULARES">
                                                                        <img src="~/Recursos/CLARO/planesRegulares.png" />
                                                                    </b-tab>
                                                                    <b-tab no-body title="PLANES TELETRABAJO">
                                                                        <img src="~/Recursos/CLARO/PlanesTeletrabajo.png" />
                                                                    </b-tab>
                                                                    <b-tab no-body title="PLANES GAMER">
                                                                        <img src="~/Recursos/CLARO/PlanesGamer.png" />
                                                                    </b-tab>
                                                                    <b-tab no-body title="EQUIPOS">
                                                                        <img src="~/Recursos/CLARO/Equipos.png" />
                                                                    </b-tab>
                                                                    <b-tab no-body title="MODELO DE EQUIPOS">
                                                                        <img src="~/Recursos/CLARO/ModeloEquipo.png" />
                                                                    </b-tab>
                                                                </b-tabs>
                                                            </b-card>
                                                        </div>
                                                    </template>
                                                    <template v-if="OFRECIMIENTO.VALUE =='DESCUENTO EN CARGO FIJO'">
                                                        <div class="form-group row">
                                                            <label for="inputEmail3" class="col-sm-4 col-form-label">Tipo descuento</label>
                                                            <div class="col-sm-8">
                                                                <select v-model="TipoDescuento" class="form-control">
                                                                    <option value="SELECCIONAR">SELECCIONAR</option>
                                                                    <option v-for="item in Lista13" v-bind:value="{ ID: item.ID, ID_CONTROL: item.ID_CONTROL, VALUE: item.VALUE ,OBSERVACION: item.OBSERVACION, ESTADO: item.ESTADO }">
                                                                        {{ item.VALUE }}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label for="inputEmail3" class="col-sm-4 col-form-label">Meses a aplicar</label>
                                                            <div class="col-sm-8">
                                                                <input v-model="Plan" type="text" class="form-control" />
                                                            </div>
                                                        </div>
                                                    </template>
                                                    <template v-if="OFRECIMIENTO.VALUE =='PUNTO ADICIONAL SIN COSTO'">
                                                        <div class="form-group row">
                                                            <label for="inputEmail3" class="col-sm-4 col-form-label">Tipo servicio</label>
                                                            <div class="col-sm-8">
                                                                <select v-model="TipoServicio" class="form-control">
                                                                    <option value="SELECCIONAR">SELECCIONAR</option>
                                                                    <option v-for="item in Lista16" v-bind:value="{ ID: item.ID, ID_CONTROL: item.ID_CONTROL, VALUE: item.VALUE ,OBSERVACION: item.OBSERVACION, ESTADO: item.ESTADO }">
                                                                        {{ item.VALUE }}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>

                                                        <div class="form-group row">
                                                            <label for="inputEmail3" class="col-sm-4 col-form-label">Nro puntos</label>
                                                            <div class="col-sm-8">
                                                                <select v-model="NroPuntos" class="form-control">
                                                                    <option value="SELECCIONAR">SELECCIONAR</option>
                                                                    <option v-for="item in Lista17" v-bind:value="{ ID: item.ID, ID_CONTROL: item.ID_CONTROL, VALUE: item.VALUE ,OBSERVACION: item.OBSERVACION, ESTADO: item.ESTADO }">
                                                                        {{ item.VALUE }}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </template>
                                                    <template v-if="OFRECIMIENTO.VALUE =='TRASLADO INTERNO SIN COSTO'">
                                                        <div class="form-group row">
                                                            <label for="inputEmail3" class="col-sm-4 col-form-label">Equipos a mover</label>
                                                            <div class="col-sm-8">
                                                                <select v-model="EquiposAMover" class="form-control">
                                                                    <option value="SELECCIONAR">SELECCIONAR</option>
                                                                    <option v-for="item in Lista10" v-bind:value="{ ID: item.ID, ID_CONTROL: item.ID_CONTROL, VALUE: item.VALUE ,OBSERVACION: item.OBSERVACION, ESTADO: item.ESTADO }">
                                                                        {{ item.VALUE }}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </template>
                                                    <template v-if="OFRECIMIENTO.VALUE =='ACTIVACIÓN DE CANALES PREMIUM'">
                                                        <div class="form-group row">
                                                            <label for="inputEmail3" class="col-sm-4 col-form-label">Paquete</label>
                                                            <div class="col-sm-8">
                                                                <select v-model="Paquete" class="form-control">
                                                                    <option value="SELECCIONAR">SELECCIONAR</option>
                                                                    <option v-for="item in Lista11" v-bind:value="{ ID: item.ID, ID_CONTROL: item.ID_CONTROL, VALUE: item.VALUE ,OBSERVACION: item.OBSERVACION, ESTADO: item.ESTADO }">
                                                                        {{ item.VALUE }}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label for="inputEmail3" class="col-sm-4 col-form-label">Periodo</label>
                                                            <div class="col-sm-8">
                                                                <select v-model="Periodo" class="form-control">
                                                                    <option value="SELECCIONAR">SELECCIONAR</option>
                                                                    <option v-for="item in Lista12" v-bind:value="{ ID: item.ID, ID_CONTROL: item.ID_CONTROL, VALUE: item.VALUE ,OBSERVACION: item.OBSERVACION, ESTADO: item.ESTADO }">
                                                                        {{ item.VALUE }}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </template>
                                                    <template v-if="OFRECIMIENTO.VALUE =='BONOS DE INCREMENTO DE VELOCIDAD TEMPORAL'">
                                                        <div class="form-group row">
                                                            <label for="inputEmail3" class="col-sm-4 col-form-label">Periodo</label>
                                                            <div class="col-sm-8">
                                                                <select v-model="Periodo" class="form-control">
                                                                    <option value="SELECCIONAR">SELECCIONAR</option>
                                                                    <option v-for="item in Lista12" v-bind:value="{ ID: item.ID, ID_CONTROL: item.ID_CONTROL, VALUE: item.VALUE ,OBSERVACION: item.OBSERVACION, ESTADO: item.ESTADO }">
                                                                        {{ item.VALUE }}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label for="inputEmail3" class="col-sm-4 col-form-label">Estado</label>
                                                            <div class="col-sm-8">
                                                                <select v-model="Estado" class="form-control">
                                                                    <option value="SELECCIONAR">SELECCIONAR</option>
                                                                    <option v-for="item in Lista15" v-bind:value="{ ID: item.ID, ID_CONTROL: item.ID_CONTROL, VALUE: item.VALUE ,OBSERVACION: item.OBSERVACION, ESTADO: item.ESTADO }">
                                                                        {{ item.VALUE }}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </template>


                                                </div>
                                            </template>

                                        </div>
                                       

                                    </div>
                                    <div class="col-sm-6 col-md-6 col-lg-6">

                                        <div style=" height: 450px; ">
                                            <b-avatar class="text-center" button icon="bookmark-check" size="24rem" variant="light"></b-avatar>
                                        </div>
                                        <br /><br /><br />
                                        <h2>Bienvenido</h2>
                                        <b-button v-on:click="activarPreventiva( { ID: 0 } )" variant="outline-info" pill><b-avatar variant="outline-info" icon="power" size="2rem"></b-avatar>Iniciar</b-button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

   
</div>
<script src="~/Scripts/LogicaDeNegocios/PreventivaIN.js"></script>
<script>
    var app = new Vue({
        el: '#app',
        data: {
            RUTA: '',
            //RUTA: '',
            MensajeSistema: '',
            idServicio: 16,
            ID_USUARIO: sessionStorage.getItem('ID_USUARIO'),
            USUARIO: sessionStorage.getItem('USUARIO'),
            SERVER_URL: sessionStorage.getItem('SERVER_URL'),
            ID_SEDE: sessionStorage.getItem('ID_SEDE'),
            PAGINA: '@@Title',
            SPEECH: '',

            ID: 0,
            CONTACTABILIDAD: 'SELECCIONAR',
            CONTACTABILIDAD_DETALLE: 'SELECCIONAR',
            SN: '0',
            CONTACTO: 'SELECCIONAR',
            CUSTOMER_ID: '0',
            TELEFONO: '0',
            TIPO_GESTION: 'SELECCIONAR',
            CALIFICACION: 'SELECCIONAR',
            CONFORMIDAD: '',

            MOTIVO: 'SELECCIONAR',
            MOTIVO_1: 'SELECCIONAR',
            MOTIVO_2: 'SELECCIONAR',
            MOTIVO_3: 'SELECCIONAR',
            MOTIVO_4: 'SELECCIONAR',
            MOTIVO_5: 'SELECCIONAR',

            CANTIDAD_EQUIPOS: 'SELECCIONAR',
            ACEPTA_VISITA: 'SELECCIONAR',
            PLAN_ACTUALIZADO: 'SELECCIONAR',
            ACEPTA_UPGRADE: 'SELECCIONAR',
            MOTIVO_NO_UPGRADE: 'SELECCIONAR',

            RESULTADO: 'SELECCIONAR',
            RESULTADO_FINAL: '',
            RESPONSABILIDAD: 'SELECCIONAR',

            FULL_CLARO: 'SELECCIONAR',
            MOTIVO_FULL_CLARO: 'SELECCIONAR',

            VELOCIDAD: 'SELECCIONAR',
            RANGO: 'SELECCIONAR',
            RANGO_VELOCIDAD: 'SELECCIONAR',

            FECHA_DIA: '',
            FECHA_HORA: 'SELECCIONAR',
            FECHA_AGENDA: '',
            OBSERVACION: '',
            PLANTILLA: '',


            OFRECIMIENTO: 'SELECCIONAR',

            textoOfrecimiento: '',
            TipoMigracion: 'SELECCIONAR',
            TipoPlan: 'SELECCIONAR',
            TipoPlay: 'SELECCIONAR',
            Plan: '',
            Equipos: '',
            HorarioSugerido: 'SELECCIONAR',
            CampoCalculadora: '',
            SVA: '',
            TipoDescuento: 'SELECCIONAR',
            TipoServicio: 'SELECCIONAR',
            NroPuntos: 'SELECCIONAR',
            Paquete: 'SELECCIONAR',
            Periodo: 'SELECCIONAR',
            Estado: 'SELECCIONAR',
            EquiposAMover: 'SELECCIONAR',

            min: minDate,
            max: maxDate,
            GESTION: 'SELECCIONAR',
            VARIABLE: '0',

            mensaje: '',
            KitCliente: '',
            Costo: '',
            ComboAv: 'SELECCIONAR',
            NombreVia: '',
            Numero: '',
            ComboMz: 'SELECCIONAR',
            Mz: '',
            Lte: '',
            DireccionEntrega: '',
            TelRef1: '',
            Referencia: '',
            TelRef2: '',
            ComboDepartamento: 'SELECCIONAR',
            ComboProvincia: 'SELECCIONAR',
            ComboDistrito: 'SELECCIONAR',
            ComboTipoPago: 'SELECCIONAR',
            ObsMesh: '',

            Lista1: [],
            Lista2: [],
            Lista3: [],
            Lista4: [],
            Lista5: [],
            Lista6: [],
            Lista7: [],
            Lista8: [],
            Lista9: [],
            Lista10: [],
            Lista11: [],
            Lista12: [],
            Lista13: [],
            Lista14: [],
            Lista15: [],
            Lista16: [],
            Lista17: [],
            Lista18: [],
            Lista19: [],
            Lista20: [],
            Lista21: [],
            Lista25: [],

            Lista26: [],
            Lista27: [],
            Lista28: [],
            Lista29: [],
            Lista30: [],
            Lista31: [],
            Lista32: [],
            Lista33: [],
            Lista34: [],
            Lista35: [],

            Lista36: [],
            Lista37: [],
            Lista38: [],
            Lista39: [],
            Lista40: [],
            Lista41: [],

            Lista50: [],
            Lista51: [],
            Lista52: [],
            Lista53: [],
            Lista54: [],
            Lista55: [],
            Lista60: [],
            Lista61: [],
            Lista62: [],
            Lista63: [],
            Lista70: [],
            Lista71: [],
            Lista80: [],
            Lista81: [],

            ListaPrincipal: [],
            ListaSolucion: [],

            ListaResultadoAvance: [],
            isLoginTrue: false,
            isPanelAgente: false,
            isOtros: false,

            isCambioPlan: false,
            isSVA: false,
            isTipoCliente: false,
            isCambioTipoCliente: false,
            isDescuentoCargoFijo: false,
            isPuntoAdicional: false,
            isEquipoAMover: false,
            isActivacionCanales: false,
            isPeriodo: false,
            isBonosIncremento: false,
            isRefinanciamiento: false,
        },
        methods: {
            mostrarToast(variant = null) {
                this.MensajeSistema = variant.msg;
                this.$bvToast.toast(this.MensajeSistema, {
                    title: `Alerta de sistema`,
                    variant: variant.toast,
                    solid: true
                })
            },
            limpiarOfrecimiento: function () {
                this.OFRECIMIENTO = 'SELECCIONAR';

                this.textoOfrecimiento = '';
                this.TipoMigracion = 'SELECCIONAR';
                this.TipoPlan = 'SELECCIONAR';
                this.TipoPlay = 'SELECCIONAR';
                this.Plan = '';
                this.Equipos = '';
                this.HorarioSugerido = 'SELECCIONAR';
                this.CampoCalculadora = '';
                this.SVA = '';
                this.TipoDescuento = 'SELECCIONAR';
                this.TipoServicio = 'SELECCIONAR';
                this.NroPuntos = 'SELECCIONAR';
                this.Paquete = 'SELECCIONAR';
                this.Periodo = 'SELECCIONAR';
                this.Estado = 'SELECCIONAR';
                this.EquiposAMover = 'SELECCIONAR';

                this.KitCliente = '';
                this.Costo = '';
                this.ComboAv = 'SELECCIONAR';
                this.NombreVia = '';
                this.Numero = '';
                this.ComboMz = 'SELECCIONAR';
                this.Mz = '';
                this.Lte = '';
                this.DireccionEntrega = '';
                this.TelRef1 = '';
                this.Referencia = '';
                this.TelRef2 = '';
                this.ComboDepartamento = 'SELECCIONAR';
                this.ComboProvincia = 'SELECCIONAR';
                this.ComboDistrito = 'SELECCIONAR';
                this.ComboTipoPago = 'SELECCIONAR';
                this.ObsMesh = '';
            },
            cargarControles: function () {
                this.Lista1 = this.ListaPrincipal.filter(producto => producto.ID_CONTROL == 1);

                this.Lista50 = []; this.Lista51 = []; this.Lista52 = []; this.Lista53 = []; this.Lista54 = []; this.Lista55 = [];

                this.Lista60 = this.ListaPrincipal.filter(producto => producto.ID_CONTROL == 60);
                this.Lista61 = this.ListaPrincipal.filter(producto => producto.ID_CONTROL == 61);
                this.Lista62 = []; this.Lista63 = [];
                this.Lista80 = this.ListaPrincipal.filter(producto => producto.ID_CONTROL == 80); this.Lista81 = [];
            },
            cargarDropdow: function (item) {         //alert(JSON.stringify(lista));
                let idControl = item.ID_CONTROL + 1;
                let lista = [];
                lista = this.ListaPrincipal.filter(producto => producto.ID_DEPENDENCIA == item.ID);

                switch (idControl) {
                    case 2: { this.Lista2 = lista; this.Lista3 = []; break; }

                }
            },
            
            iniciar: function () {
                axios.post(this.SERVER_URL + '/api/Claro/AdministrarPreventiva', {
                    USUARIO: this.USUARIO,
                    ID: this.ID,
                    TIPO: 1
                }).then(response => {
                    if (response.data.ID > 0) {
                        this.ID = response.data.ID;
                        this.mostrarToast({ toast: 'info', msg: 'Iniciando un nuevo registro ...' });
                    }
                }).catch(e => {
                    this.mostrarToast({ toast: 'warning', msg: 'Error en la conexión ...' });
                });
            },
     
            generarPlantilla: function () {
                let solucion = ''; let arma = '';

                for (var item in this.ListaSolucion) {
                    if (`${this.ListaSolucion[item].ID_GRUPO}` == 1) { solucion = solucion + `${this.ListaSolucion[item].OFRECIMIENTO}` + ' - '; }
                    else { arma = arma + `${this.ListaSolucion[item].OFRECIMIENTO}` + ' - '; }
                }
                solucion = solucion.slice(0, -2); arma = arma.slice(0, -2);

                this.PLANTILLA = " | Contactabilidad: " + this.CONTACTABILIDAD.VALUE + " - " + this.CONTACTABILIDAD_DETALLE.VALUE + "SIAC" + " | SN: " + this.SN + " | Contacto: " + this.CONTACTO.VALUE + " | Customer ID: " + this.CUSTOMER_ID + " | Teléfono: " + this.TELEFONO + " | Tipo gestión: " + this.TIPO_GESTION.VALUE + " | Calificación: " + this.CALIFICACION.VALUE + " | Conformidad: " + this.CONFORMIDAD +
                    " | Motivo: " + this.MOTIVO.VALUE + " | Motivo 1: " + this.MOTIVO_1.VALUE + " | Motivo 2: " + this.MOTIVO_2.VALUE + " | Motivo 3: " + this.MOTIVO_3.VALUE + " | Motivo 4: " + this.MOTIVO_4.VALUE + " | Motivo 5: " + this.MOTIVO_5.VALUE +
                    " | Velocidad: " + this.VELOCIDAD.VALUE + " | Rango: " + this.RANGO.VALUE + " | Test velocidad: " + this.RANGO_VELOCIDAD + " | Cant. equipos conectados: " + this.CANTIDAD_EQUIPOS.VALUE +
                    " | Plan actualizado: " + this.PLAN_ACTUALIZADO.VALUE + " | Acepta Upgrade: " + this.ACEPTA_UPGRADE.VALUE + " | Motivo no Upgrade: " + this.MOTIVO_NO_UPGRADE.VALUE +
                    " | Solución: " + solucion + " | Arma: " + arma +
                    " | Resultado: " + this.RESULTADO.VALUE + " | Resultado final: " + this.RESULTADO_FINAL + " | Responsabilidad: " + this.RESPONSABILIDAD.VALUE +
                    " | Full Claro: " + this.FULL_CLARO.VALUE + " | Motivo Full Claro: " + this.MOTIVO_FULL_CLARO.VALUE +
                    " | Observación: " + this.OBSERVACION;
            },

            abrirOfrecimientos: function (item) {
                this.Lista21 = this.ListaPrincipal.filter(producto => producto.ID_CONTROL == 21 && producto.OBSERVACION == item.Ofrecimiento);
                this.OFRECIMIENTO = 'SELECCIONAR';
                this.GESTION = 'SELECCIONAR';
                this.VARIABLE = '0';
                this.textoOfrecimiento = '';
                this.mostrarModal({ modal: 'formularioOfrecimiento', msg: item.Ofrecimiento });
            },
            registrarOfrecimiento: function () {
                this.textoOfrecimiento = '';
                if (this.OFRECIMIENTO.VALUE != 'SELECCIONAR') {
                    let msg = "Verificar los siguientes campos: ";
                    let tipoDescuento = '';
                    let meses = '';
                    let texto = '| ' + this.MensajeSistema + ': ' + this.OFRECIMIENTO.VALUE + ' | ';

                    if (this.OFRECIMIENTO.SPEECH == 'SI') {
                        msg = this.GESTION == 'SELECCIONAR' ? msg + " Gestion" : msg;
                        texto = texto + this.GESTION.VALUE + "  ";
                        if (this.GESTION.SPEECH == 'SI') {
                            msg = this.VARIABLE.length < 8 ? msg + " Valor " + this.GESTION.VALUE : msg;
                            texto = texto + this.VARIABLE + "  ";
                        }
                    }
                    if (msg.length < 35) {
                        if (this.OFRECIMIENTO.VALUE == 'REPETIDOR MESH' && this.GESTION.VALUE == 'SI') {
                            msg = this.KitCliente.length < 3 ? msg + " Kit cliente" : msg;
                            msg = this.Costo.length < 1 ? msg + " Costo" : msg;
                            msg = this.ComboAv == 'SELECCIONAR' ? msg + " Av/Calle/Jr " : msg;
                            msg = this.NombreVia.length < 3 ? msg + " Nombre de la via" : msg;
                            msg = this.Numero.length < 3 ? msg + " Numero" : msg;
                            msg = this.ComboMz == 'SELECCIONAR' ? msg + " Mz/Bloq/Edif" : msg;
                            msg = this.DireccionEntrega.length < 3 ? msg + " Dirección entrega" : msg;
                            msg = this.TelRef1.length < 4 ? msg + " TelRef1" : msg;
                            msg = this.Referencia.length < 4 ? msg + " Referencia" : msg;
                            msg = this.TelRef2.length < 4 ? msg + " TelRef2" : msg;
                            msg = this.ComboDepartamento == 'SELECCIONAR' ? msg + " Departamento" : msg;
                            msg = this.ComboProvincia == 'SELECCIONAR' ? msg + " Provincia" : msg;
                            msg = this.ComboDistrito == 'SELECCIONAR' ? msg + " Distrito" : msg;
                            msg = this.ComboTipoPago == 'SELECCIONAR' ? msg + " TipoPago" : msg;

                            texto = texto + " | KitCliente: " + this.KitCliente + "  | Costo: " + this.Costo + "  | " + this.ComboAv.VALUE + ": " + this.NombreVia + " N° " + this.Numero + "  | " + this.ComboMz.VALUE + ": " + this.Mz + " Lte: " + this.Lte +
                                "  | Dirección entrega: " + this.DireccionEntrega + " Tel. Ref1: " + this.TelRef1 + "  | Referencia: " + this.Referencia + " Tel. Ref2: " + this.TelRef2 + "  | Ubigeo: " + this.ComboDepartamento.VALUE + " - " + this.ComboProvincia.VALUE + " - " + this.ComboDistrito.VALUE + "  | Tipo Pago: " + this.ComboTipoPago.VALUE + "  | ObservaciÓn: " + this.ObsMesh;
                        } else if (this.OFRECIMIENTO.VALUE == 'REFINANCIAMIENTO DE DEUDA') {
                            texto = texto + " | Monto " + this.CampoCalculadora;
                        } else if (this.OFRECIMIENTO.VALUE == 'ACTIVACIÓN DE SERVICIO DE VALOR AGREGADO') {
                            texto = texto + " | Monto " + this.SVA;
                        } else if (this.OFRECIMIENTO.VALUE == 'CAMBIO DE PLAN') {
                            texto = texto + " | Tipo Migración: " + this.TipoMigracion.VALUE;
                            texto = texto + " | Tipo Play: " + this.TipoPlay.VALUE;
                            texto = texto + " | Tipo plan: " + this.TipoPlan.VALUE;
                            texto = texto + " | Plan: " + this.Plan;
                            texto = texto + " | Equipos: " + this.Equipos;
                            texto = texto + " | Horario sugerido: " + this.HorarioSugerido;
                        } else if (this.OFRECIMIENTO.VALUE == 'DESCUENTO EN CARGO FIJO') {
                            texto = texto + " | Tipo descuento: " + this.TipoDescuento.VALUE;
                            texto = texto + " | Meses a aplicar: " + this.Plan;

                            tipoDescuento = this.TipoDescuento.VALUE;
                            meses = this.Plan;
                        } else if (this.OFRECIMIENTO.VALUE == 'PUNTO ADICIONAL SIN COSTO') {
                            texto = texto + " | Tipo servicio: " + this.TipoServicio.VALUE;
                            texto = texto + " | Nro puntos: " + this.NroPuntos.VALUE;
                        } else if (this.OFRECIMIENTO.VALUE == 'TRASLADO INTERNO SIN COSTO') {
                            texto = texto + " | Equipos a mover: " + this.EquiposAMover.VALUE;
                        } else if (this.OFRECIMIENTO.VALUE == 'ACTIVACIÓN DE CANALES PREMIUM') {
                            texto = texto + " | Paquete: " + this.Paquete.VALUE;
                            texto = texto + " | Periodo: " + this.Periodo.VALUE;
                        } else if (this.OFRECIMIENTO.VALUE == 'BONOS DE INCREMENTO DE VELOCIDAD TEMPORAL') {
                            texto = texto + " | Periodo: " + this.Periodo.VALUE;
                            texto = texto + " | Estado: " + this.Estado.VALUE;
                        }
                    }

                    if (msg.length < 35) {
                        axios.post(this.SERVER_URL + '/api/Claro/AdministrarOfrecimiento', {
                            ID_SOURCE: this.ID,
                            OFRECIMIENTO: this.OFRECIMIENTO.VALUE,
                            GESTION: texto,
                            OBSERVACION: this.OBSERVACION,
                            TIPO_DESCUENTO: tipoDescuento,
                            MESES: meses,
                            USUARIO: this.USUARIO,
                            ID_GRUPO: (this.MensajeSistema == 'ARMA' ? 2 : 1),
                            TIPO: 2,
                        }).then(response => {
                            if (response.data.ID > 0) {
                                this.ListaSolucion.push({ ID: response.data.ID, OFRECIMIENTO: this.OFRECIMIENTO.VALUE, GESTION: texto, ID_GRUPO: this.MensajeSistema == 'ARMA' ? 2 : 1 })

                                this.mostrarToast({ toast: 'success', msg: 'Guardado correctamente' });
                            } else {
                                this.mostrarToast({ toast: 'danger', msg: 'Ocurrio un error, registro no guardado ...' });
                            }
                            this.$bvModal.hide('formularioOfrecimiento');
                        }).catch(e => {
                            this.mostrarToast({ toast: 'warning', msg: 'Error en la conexión ...' });
                        });
                    }
                }
            },

            cargarOpciones: function () {
                axios.post(this.SERVER_URL + '/api/Opciones/ListarOpcionesCRM', {
                    ID_GRUPO: this.idServicio,
                    TIPO: 5,
                }).then(response => {
                    this.ListaPrincipal = response.data;
                }).catch(e => {
                    this.mostrarToast({ toast: 'warning', msg: 'Error en la conexión ...' });
                });
            }
        }
    })
</script>

